<div class="m-4 px-2 py-4 bg-white rounded-lg shadow-lg">
  <!-- Header Section -->
  <div class="flex flex-1 justify-between items-center p-2 border-b border-slate-100">
    <p-select [options]="[]" size="small" class="candidates-dropdown" placeholder="All Candidates">
      <ng-template #selectedItem let-selected>
        <div class="flex items-center gap-2">
          <i class="pi pi-th-large"></i>
          <span>{{ selected?.label || 'All Candidates' }}</span>
        </div>
      </ng-template>
    </p-select>

    <div class="flex gap-1">
      <p-button
        disabled
        icon="pi pi-file-edit"
        label="Note"
        [text]="true"
        severity="secondary"
        size="small"
      />
      <p-button
        disabled
        icon="pi pi-calendar"
        label="Schedule"
        [text]="true"
        severity="secondary"
        size="small"
      />
      <p-button disabled icon="pi pi-envelope" [text]="true" severity="secondary" size="small" />
      <p-button disabled icon="pi pi-copy" [text]="true" severity="secondary" size="small" />
      <p-button disabled icon="pi pi-share-alt" [text]="true" severity="secondary" size="small" />

      <p-divider layout="vertical" />

      <p-button
        icon="pi pi-sliders-h"
        label="Advanced"
        [text]="true"
        severity="secondary"
        size="small"
      />
      @if (viewType() === 'table') {
        <p-button
          icon="pi pi-table"
          label="Columns"
          [text]="true"
          severity="secondary"
          size="small"
        />
      }

      <p-divider layout="vertical" />

      <p-button
        (click)="viewType.set('table')"
        icon="pi pi-list"
        [text]="viewType() === 'card'"
        severity="secondary"
        size="small"
        pTooltip="View as table"
        tooltipPosition="top"
      />
      <p-button
        (click)="viewType.set('card')"
        icon="pi pi-th-large"
        [text]="viewType() === 'table'"
        severity="secondary"
        size="small"
        pTooltip="View as grid"
        tooltipPosition="top"
      />

      <p-button
        icon="pi pi-download"
        label="Import"
        severity="primary"
        class="import-btn"
        size="small"
      />
    </div>
  </div>

  <!-- Filter Row - Shared by both views -->
  <div class="flex gap-3 p-3 border-b border-slate-100 bg-slate-50">
    <div class="flex-1">
      <label for="salom" class="block text-xs text-slate-500 mb-1">First Name</label>
      <input
        #firstNameInput
        pInputText
        type="text"
        placeholder="Filter..."
        class="w-full"
        pSize="small"
        (input)="onFilterInput('firstName', firstNameInput.value)"
      />
    </div>
    <div class="flex-1">
      <label for="salom" class="block text-xs text-slate-500 mb-1">Last Name</label>
      <input
        #lastNameInput
        pInputText
        type="text"
        placeholder="Filter..."
        class="w-full"
        pSize="small"
        (input)="onFilterInput('lastName', lastNameInput.value)"
      />
    </div>
    <div class="flex-1">
      <label for="salom" class="block text-xs text-slate-500 mb-1">Status</label>
      <p-select
        [options]="statusOptions"
        placeholder="All"
        size="small"
        class="w-full"
        (onChange)="onStatusChange($event.value)"
      />
    </div>
    <div class="flex-1">
      <label for="salom" class="block text-xs text-slate-500 mb-1">Job Title</label>
      <input
        #jobTitleInput
        pInputText
        type="text"
        placeholder="Filter..."
        class="w-full"
        pSize="small"
        (input)="onFilterInput('jobTitle', jobTitleInput.value)"
      />
    </div>
    <div class="flex-1">
      <label for="salom" class="block text-xs text-slate-500 mb-1">Location</label>
      <input
        #cityInput
        pInputText
        type="text"
        placeholder="Filter..."
        class="w-full"
        pSize="small"
        (input)="onFilterInput('city', cityInput.value)"
      />
    </div>
    <div class="flex-1">
      <label for="salom" class="block text-xs text-slate-500 mb-1">Email</label>
      <input
        #emailInput
        pInputText
        type="text"
        placeholder="Filter..."
        class="w-full"
        pSize="small"
        (input)="onFilterInput('email', emailInput.value)"
      />
    </div>
  </div>

  <!-- Loading State -->
  @if (loading()) {
    <div class="flex justify-center items-center py-20">
      <p-progressSpinner ariaLabel="Loading candidates" />
    </div>
  } @else {
    <!-- Candidates views -->
    @if (viewType() === 'table') {
      <app-table-view></app-table-view>
    } @else {
      <app-card-view></app-card-view>
    }

    <!-- Shared Paginator -->
    <p-paginator
      [first]="first"
      [rows]="rows"
      [totalRecords]="totalRecords()"
      [rowsPerPageOptions]="rowsPerPageOptions"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} â€“ {last} of {totalRecords}"
      (onPageChange)="onPageChange($event)"
    >
    </p-paginator>
  }
</div>
