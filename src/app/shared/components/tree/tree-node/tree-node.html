<div [class.bg-blue-100]="isDragOver()" [class.hover:bg-gray-100]="!isDragOver()">
  <button
    [draggable]="item().draggable"
    class="w-full flex items-center gap-2 p-2 cursor-pointer transition-all rounded-md"
    (dragenter)="dragEntered($event)"
    (dragleave)="dragLeft($event)"
    (drop)="drop($event)"
    (dragover)="dragOver($event)"
    (click)="toggle()"
    [class.bg-gray-100]="item().expanded"
    [class.text-blue-600]="item().link === router.url"
  >
    @if (item().children) {
      <i class="pi pi-chevron-right" [@rotateIcon]="item().expanded ? 'expanded' : 'collapsed'"></i>
    }
    <i [class]="item().icon"></i>
    {{ item().label }}
  </button>
  @if (item().children) {
    <div class="ml-4" [@expandCollapse]="item().expanded ? 'expanded' : 'collapsed'">
      @for (child of item().children; track child.label) {
        <app-tree-node [item]="child"></app-tree-node>
      } @empty {
        No children
      }
    </div>
  }
</div>
